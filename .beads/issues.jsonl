{"id":"icecream-1","title":"Game Foundation Epic","type":"epic","priority":1,"status":"open","description":"Set up the core Next.js application with Turbo, Redis session management, and foundational game state architecture."}
{"id":"icecream-2","title":"Initialize Next.js app with Turbo","type":"task","priority":1,"status":"open","description":"Create the Next.js application using create-next-app with Turbo. Set up basic project structure, TypeScript config, and development environment.","parent":"icecream-1"}
{"id":"icecream-3","title":"Set up Redis connection and session management","type":"task","priority":1,"status":"open","description":"Integrate Redis client (ioredis or similar), implement session ID generation, and create basic get/set helpers for game state persistence.","parent":"icecream-1","blocks":["icecream-4"]}
{"id":"icecream-4","title":"Define game state schema","type":"task","priority":1,"status":"open","description":"Define TypeScript interfaces for complete game state: GlobalPulse, CityPulse, NeighborhoodPulse, FamilyImpact, Events, and turn state. Store in Redis.","parent":"icecream-1"}
{"id":"icecream-5","title":"City Profiling Pipeline Epic","type":"epic","priority":1,"status":"open","description":"Build tooling and agent workflows to generate structured city data from real news sources and demographic data for all 20 launch cities."}
{"id":"icecream-6","title":"Set up NewsAPI integration","type":"task","priority":1,"status":"open","description":"Create utility to fetch recent news (2-3 months) for specific cities using NewsAPI.org. Focus on immigration, enforcement, sanctuary policy, and local politics keywords.","parent":"icecream-5"}
{"id":"icecream-7","title":"Set up Census ACS API integration","type":"task","priority":2,"status":"open","description":"Create utility to fetch demographic data from Census American Community Survey API. Target: population, median income, foreign-born %, language data, housing costs.","parent":"icecream-5"}
{"id":"icecream-8","title":"Define city data schema","type":"task","priority":1,"status":"open","description":"Define TypeScript interfaces matching the spec: CityPulse, NeighborhoodPulse, CityEvent, NeighborhoodEvent. Include validation and defaults.","parent":"icecream-5"}
{"id":"icecream-9","title":"Create city profiling agent workflow","type":"task","priority":2,"status":"open","description":"Design agent prompt and workflow that takes NewsAPI + Census data and produces structured city profiles per CITY_PROFILING_BRIEF. Output: JSON city files.","parent":"icecream-5","blocks":["icecream-23"]}
{"id":"icecream-10","title":"Core Game Systems Epic","type":"epic","priority":1,"status":"open","description":"Implement the layered pulse system (Global → City → Neighborhood → Family) with drift mechanics, event triggers, and cross-layer propagation."}
{"id":"icecream-11","title":"Implement Global pulse system","type":"task","priority":2,"status":"open","description":"Implement GlobalPulse with enforcementClimate, mediaNarrative, judicialAlignment, politicalVolatility. Update every 14-28 turns. Create GlobalEvent triggers.","parent":"icecream-10"}
{"id":"icecream-12","title":"Implement City pulse system","type":"task","priority":2,"status":"open","description":"Implement CityPulse with federalCooperation, dataDensity, politicalCover, civilSocietyCapacity, bureaucraticInertia. Update every 7 turns. Handle CityEvents.","parent":"icecream-10"}
{"id":"icecream-13","title":"Implement Neighborhood pulse system","type":"task","priority":2,"status":"open","description":"Implement NeighborhoodPulse with trust, suspicion, enforcementVisibility, communityDensity, economicPrecarity. Update every turn. Handle NeighborhoodEvents.","parent":"icecream-10"}
{"id":"icecream-14","title":"Implement Family impact system","type":"task","priority":2,"status":"open","description":"Implement FamilyImpact with visibility, stress, cohesion, trustNetworkStrength. These are modified by player choices and affect neighborhood pulses.","parent":"icecream-10"}
{"id":"icecream-15","title":"Implement event system","type":"task","priority":2,"status":"open","description":"Create event selection engine: weighted random based on pulse values, event pools per layer, severity scaling, duration tracking, and consequence resolution.","parent":"icecream-10"}
{"id":"icecream-16","title":"Implement cross-layer propagation","type":"task","priority":2,"status":"open","description":"Implement propagation rules: effects flow down easily (global→city→neighborhood), up slowly. Use formulas from spec as starting point, tune for balance.","parent":"icecream-10","blocks":["icecream-17"]}
{"id":"icecream-17","title":"Turn System Epic","type":"epic","priority":1,"status":"open","description":"Implement the core gameplay loop: narrative prompts, player choices, unlock system, and consequence resolution within ~80 turn game arc."}
{"id":"icecream-18","title":"Design turn state machine","type":"task","priority":1,"status":"open","description":"Define turn phases: Plan → Pulse Update → Event → Decision → Consequence. Implement state machine with clear transitions and hooks for UI.","parent":"icecream-17"}
{"id":"icecream-19","title":"Implement narrative prompt UI","type":"task","priority":2,"status":"open","description":"Build the core turn interface: display current situation, show narrative prompt text, render single-select and multi-select choice options.","parent":"icecream-17"}
{"id":"icecream-20","title":"Implement choice/unlock system","type":"task","priority":2,"status":"open","description":"Create system for conditional choice availability. Choices unlock based on: family variables, turn count, previous choices, neighborhood state, rights knowledge.","parent":"icecream-17"}
{"id":"icecream-21","title":"Connect choices to family variables","type":"task","priority":2,"status":"open","description":"Implement consequence engine: map player choices to family variable changes (visibility, stress, cohesion, trust network). Handle tradeoffs (work vs community).","parent":"icecream-17"}
{"id":"icecream-22","title":"Content Generation Epic","type":"epic","priority":2,"status":"open","description":"Generate all city profiles, neighborhood data, and event content for the 20 launch cities using the profiling pipeline."}
{"id":"icecream-23","title":"Generate profiles for all 20 cities","type":"task","priority":2,"status":"open","description":"Run city profiling agent for: LA, SF, Phoenix, Seattle, El Paso, Tucson, San Antonio, Chicago, Detroit, Minneapolis, Columbus, Houston, Miami, Atlanta, Nashville, NYC, Boston, Philadelphia, Newark, Denver.","parent":"icecream-22"}
{"id":"icecream-24","title":"Create base event pools","type":"task","priority":2,"status":"open","description":"Write/generate event templates for each event type: Audit, Checkpoint, RaidRumor, Meeting, Detention (neighborhood); Policy, Budget, Infrastructure, Media (city); Executive, Judicial, Media, Security (global).","parent":"icecream-22"}
{"id":"icecream-25","title":"Create city-specific special events","type":"task","priority":3,"status":"open","description":"For each city, create 3-5 special events based on recent news that can dramatically shift neighborhood conditions. These become content refresh pipeline.","parent":"icecream-22"}
{"id":"icecream-26","title":"Victory Conditions Epic","type":"epic","priority":2,"status":"open","description":"Implement the three win conditions (Sanctuary, Outlast, Transform) and failure states with clear mechanical triggers."}
{"id":"icecream-27","title":"Define victory/failure thresholds","type":"task","priority":2,"status":"open","description":"Specify exact conditions for each ending: Sanctuary (local protection threshold), Outlast (survive N turns until political shift), Transform (exposure/pressure threshold). Define failure states.","parent":"icecream-26"}
{"id":"icecream-28","title":"Implement ending detection and resolution","type":"task","priority":2,"status":"open","description":"Create system to check win/loss conditions each turn, trigger appropriate ending sequences, and handle game completion state.","parent":"icecream-26"}
